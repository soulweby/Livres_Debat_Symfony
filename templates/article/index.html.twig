{# templates/article/show.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}
	{{ article.title }}
{% endblock %}

{% block body %}
	<style>
		.example-wrapper {
			margin: 1em auto;
			max-width: 800px;
			width: 95%;
		}
		.card {
			border-radius: 10px;
			box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
			opacity: 0;
			transform: translateY(20px);
			animation: fadeIn 0.5s forwards;
			transition: box-shadow 0.3s ease, transform 0.3s ease;
		}
		.card:hover {
			box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
			transform: translateY(0) scale(1.02);
		}
		.comment {
			border-bottom: 1px solid #e0e0e0;
			padding: 0.5em 0;
		}
		@keyframes fadeIn {
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}
	</style>

	<div class="example-wrapper">
		<div class="card mb-4 shadow">
			<div class="card-body">
				<h2 class="card-title">{{ article.title }}</h2>
				<p class="card-text">{{ article.content }}</p>
			</div>
		</div>

		<div class="card mb-4 shadow">
			<div class="card-header">
				<h3>Commentaires</h3>
			</div>
			<div class="card-body">
				{% for commentaire in article.comment %}
					<div class="comment mb-3 p-2 border-bottom">
						<p>
							<strong>{{ commentaire.autor }}</strong>
							<small class="text-muted">le
								{{ commentaire.date|date('d/m/Y H:i') }}</small>
						</p>
						<p>{{ commentaire.content }}</p>
					</div>
				{% else %}
					<p class="text-muted">Aucun commentaire pour cet article.</p>
				{% endfor %}
			</div>
		</div>

		<div class="card mb-4 shadow">
			<div class="card-header">
				<h4>Ajouter un commentaire</h4>
			</div>
			<div
				class="card-body">
				<!-- Bouton pour ouvrir la modal -->
				<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#commentModal">
					Ajouter un commentaire
				</button>
			</div>
		</div>

		<!-- Modal -->
		<div class="modal fade" id="commentModal" tabindex="-1" aria-labelledby="commentModalLabel" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="commentModalLabel">Ajouter un commentaire</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						{{ form_start(comment_form) }}
						{{ form_row(comment_form.content, { 'attr': {'class': 'form-control', 'placeholder': 'Votre commentaire...'} }) }}
						<button type="submit" class="btn btn-primary mt-3">Envoyer</button>
						{{ form_end(comment_form) }}
					</div>
				</div>
			</div>
		</div>

		<a class="btn btn-secondary" href="{{ path('article') }}">‚Üê Retour</a>
	</div>
{% endblock %}

